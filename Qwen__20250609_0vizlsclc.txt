
---

## 4️⃣ Passo: Código do jogo (`batalha.py`)

Aqui vai o código completo do jogo:

```python
# batalha.py

def criar_tabuleiro(tamanho=5):
    return [["~" for _ in range(tamanho)] for _ in range(tamanho)]

def mostrar_tabuleiro(tabuleiro, ocultar_navios=False):
    print("  " + " ".join(str(i) for i in range(len(tabuleiro))))
    for idx, linha in enumerate(tabuleiro):
        linha_mostrar = []
        for celula in linha:
            if ocultar_navios and celula == "N":
                linha_mostrar.append("~")
            else:
                linha_mostrar.append(celula)
        print(f"{idx} {' '.join(linha_mostrar)}")

def posicionar_navio(tabuleiro):
    tamanho = len(tabuleiro)
    while True:
        try:
            print("Posicione seu navio.")
            x = int(input(f"Linha (0-{tamanho - 1}): "))
            y = int(input(f"Coluna (0-{tamanho - 1}): "))
            if tabuleiro[x][y] == "~":
                tabuleiro[x][y] = "N"
                break
            else:
                print("Já existe um navio nessa posição.")
        except (ValueError, IndexError):
            print("Entrada inválida. Tente novamente.")

def atirar(tabuleiro):
    tamanho = len(tabuleiro)
    while True:
        try:
            x = int(input(f"Linha do tiro (0-{tamanho - 1}): "))
            y = int(input(f"Coluna do tiro (0-{tamanho - 1}): "))
            if tabuleiro[x][y] == "N":
                tabuleiro[x][y] = "X"
                print("Acertou!")
                return True
            elif tabuleiro[x][y] in ("A", "X"):
                print("Você já atirou aqui.")
                return False
            else:
                tabuleiro[x][y] = "A"
                print("Água!")
                return False
        except (ValueError, IndexError):
            print("Entrada inválida. Tente novamente.")

def jogar():
    print("=== Batalha Naval ===\n")
    tamanho = 5
    tentativas = 10
    navios = 3

    # Jogador 1 posiciona navios
    tabuleiro_jogador1 = criar_tabuleiro()
    print("\nJogador 1, posicione seus navios:")
    for _ in range(navios):
        mostrar_tabuleiro(tabuleiro_jogador1)
        posicionar_navio(tabuleiro_jogador1)

    # Limpa o terminal para esconder do jogador 2
    print("\n" * 50)
    print("Jogador 2, é sua vez!")

    # Jogador 2 tenta acertar
    acertos = 0
    while tentativas > 0 and acertos < navios:
        print(f"\nTentativas restantes: {tentativas}")
        mostrar_tabuleiro(tabuleiro_jogador1, ocultar_navios=True)
        if atirar(tabuleiro_jogador1):
            acertos += 1
        tentativas -= 1

    if acertos == navios:
        print("\nParabéns! Você afundou todos os navios!")
    else:
        print("\nFim das tentativas! Você perdeu.")

if __name__ == "__main__":
    jogar()